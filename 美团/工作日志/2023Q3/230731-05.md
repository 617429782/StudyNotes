长期 todo:
  - 渲染器文档建设 https://km.sankuai.com/collabpage/1372541890
  - 问题修复 https://km.sankuai.com/collabpage/1417649801
  - 2023H1 OKR 制定 https://km.sankuai.com/collabpage/1548268685

高复杂度页面测试
  - 联名卡 qianminmin https://pr-fop.fe.test.sankuai.com/sky/visualEdit/userappeal/page/task
  - 管治平台 daiyuxin02 http://skyriver.fsp.test.sankuai.com/visualeditor/visualEdit/govern/page/deliverables_label
  - 清算运营 wb_xionghang https://skyriver-fop-next.fsp.test.sankuai.com/visualeditor/visualEdit/clearing/page/record-manage
  - 运营清算-新增/修改数据源配置 http://wangyarong02-cldky-sl-skyriver-fop-next.fsp.test.sankuai.com/visualeditor/visualEdit/clearing/page/addOrEdit-data-source-configuration?type=update&id=1842387

中期 todo
  - 鲸湾 iframe 通信SDK 问题 => 待定位，已有临时解决方案
    - 多次发送同一事件，仅首次生效
  - 模拟层 iframe 通信改为 host 通信
  - 非功能性需求 https://km.sankuai.com/collabpage/1527097511
  
下周 todo
  - 体验bug修复 https://km.sankuai.com/collabpage/1584517517
  - 资产包管理能力 https://km.sankuai.com/collabpage/1604183084?from=citadel_collabpage

  - el_ref (feature/ref_0510) 功能优化 https://km.sankuai.com/collabpage/1665606241
    √ 功能用例 https://skyriver.fsp.test.sankuai.com/visualeditor/visualEdit/systemId/page/elRefTest#group-component-1
    - window.refStatic 问题 => 加上 window.proxy.refStatic 的兼容
    - 文档更新

  - 运行态性能、异常分 appkey 上报
  - 渲染器错误捕获中，增加判断，仅抛出 Error 类型，忽略 reject

  - 保险自定义组件生命周期执行两次问题

  - 引擎升级 MVP https://km.sankuai.com/collabpage/1658605790
    - 通用模拟器 P2
    - 通用渲染器 P2 https://km.sankuai.com/collabpage/1704642495
      √ 开源渲染器 vs air 渲染器
      - 单测实践 https://km.sankuai.com/collabpage/1715981824
    √ 预览模块、插件 P0 https://km.sankuai.com/collabpage/1704651968
    √ 页面树插件 P1 https://km.sankuai.com/collabpage/1725931782
    √ 页面创建链路 https://km.sankuai.com/collabpage/1726214208
    √ 保存插件 https://km.sankuai.com/collabpage/1741292082

  - 引擎升级 2.0
    - 模版使用链路
      - 模组式模版配置
      - 模版预览
      - AI 创建链路
      - 设计稿解析链路
    - 通用模拟器开发
    - 通用渲染器开发

  - 动态注册 vuex 模块引起全量更新问题

  - eva 多渲染器支持 https://tt.sankuai.com/ticket/handle?filter=todo&id=77407963

  - 渲染器测试用例持续补充 https://skyriver.sankuai.com/visualeditor/visualEdit/example/page/actionTest

周一
  - 客服问题
    √ 管治平台咨询 => thrift 请求被取消
    √ 请求代理携带自定义 token
      https://skyriver.fsp.test.sankuai.com/visualeditor/visualEdit/ppc/page/online-privacy
      http://10.102.132.125/board-website/teamwork/detail/fusion-edit?project_id=50fd5430a668414c9e922cd84ac506db&flow_id=938e93e43613425eb7556cf436df6152

  √ 引擎升级 MVP 版本联调问题修复

  √ 请求代理流程梳理 https://km.sankuai.com/collabpage/1800002984

周二
  √ 引擎升级 MVP 内置动作实现 https://km.sankuai.com/collabpage/1743125196

周三
  - 引擎升级 MVP 版本联调问题修复
    √ 拖入后默认选中问题
    √ 切换 titled 面板不生效问题
    √ 选中后画布工具组件名被遮挡问题
    √ 组件无法删除问题

周四
  - 渲染器中期规划 https://km.sankuai.com/collabpage/1769097064

  - 客服周会 11:00 - 11:30
    https://km.sankuai.com/collabpage/1801524246
    https://km.sankuai.com/collabpage/1588212975#id-%E4%B8%B4%E6%97%B6%E4%BF%AE%E5%A4%8D

  - TTI 问题跟进 => 7.24 覆盖了 1.13.x 版本，验证也是生效的，但看数据目前还是有很多 10s 以上的测速点访问

  √ 引擎升级 MVP 版本验收 19:00 - 20:00
    https://km.sankuai.com/collabpage/1792871559
    https://km.sankuai.com/collabpage/1794532297

  舒望培养方案 https://km.sankuai.com/collabpage/1771139736

周五
  周会 https://km.sankuai.com/collabpage/1650074874 14:00-16:00

  - 客服问题
    - $row 相关问题清理

  - 引擎升级 2.0 通用模拟器、渲染器能力盘点、测试用例编写
  
小记
  - 插件开发手册 https://km.sankuai.com/collabpage/1694195439








2.19.3 有问题页面
1. tabs 内容渲染不出来 https://pr-fop.fe.test.sankuai.com/sky/userappeal/page/task => 原因是 this.xxx 访问不到内容
2. 切换/切回页面后内容不全，并且无法通过刷新解决 https://skyriver.fsp.test.sankuai.com/visualeditor/gray/page/iteractionDetail
3. 报错当前节点不具备 slot 环境 https://skyriver.fsp.test.sankuai.com/visualeditor/gray/page/iteration


const host = project.simulatorHost[Object.getOwnPropertySymbols(project.simulatorHost)[0]]
const node = project.currentDocument.selection.getNodes()[0]
const getCI = host.getComponentInstances.bind(host)

const getNodes = host.currentDocument.selection.getNodes.bind(project.currentDocument.selection)
host.currentDocument.selection.getNodes = (...args) => {
    debugger
    getNodes(...args)
}

const od = host.designer.dragon.boost.bind(host.designer.dragon)
host.designer.dragon.boost = (...args) => {
    debugger
    od(...args)
}

host.getComponentInstances = (node) => {
  debugger
  return getCI(node)
}
host.getComponentInstances(node)

问题：
host.getComponentInstances
首次执行时，node.document.id 为空，node.document 指向了 currentDocument 对象
后续执行时，node.document 指向了 DocumentModel，因而 node.document.id 不为空

designer 监听 dragon 放置事件时，创建的 node 符合预期

project 和 host 的 currentDocument 对象不一样


bem_tools 工作流程梳理
选中流程：
1. 核心在于 host.currentDocument.selection 的读写
2. BorderSelecting 负责监听 host.currentDocument.selection.getNodes()，并循环渲染 BorderSelectingForNode
3. BorderSelectingForNode 负责从 Node 中拿到 DOM，并计算 DOM 的 Rect, 传给 BorderSelectingInstance
4. BorderSelectingInstance 根据 Rect 计算最终的 style，确定选中框形状

需要监听 Rect 变化的是 BorderSelectingInstance，BorderSelectingForNode 只负责监听 Node 的变化