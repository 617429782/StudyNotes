## 上周工作回顾 & 遗留
  - vanx 分享
    - watcher 原理
    √ Dep.target 的设置时机 - 创建 Watcher 实例的时候
    √ 为什么在 mutation 每次修改 state 都会触发一次 watch
    √ 不参与渲染的数据, 放在 computed 比放 mapData, 拥有更好的渲染性能 - mapData 会调用 setData
    - 参与渲染的数据, 使用 mapState 或 mapGetters 计算, 比 mapData 整个对象, 拥有更好的渲染性能
  - vue-Router 源码
  - 天网各项目报错的可视化界面

  - 日志上报方案调研
    错误捕获
    批量上报

## 本周工作安排
  √ 爱逛精选合并 
    prd: https://doc.qima-inc.com/pages/viewpage.action?pageId=312091646
    ui: https://lanhuapp.com/url/nwcTx-2l0I3
    进度: https://doc.qima-inc.com/pages/viewpage.action?pageId=312761896
    √ 小程序搜索模块, 按类搜索
    √ 小程序首页搜索热词, 运营后台热词管理

  √ 运营后台 动态路由

  √ 运营后台 zent升级 -买手店模块测试

  √ 小程序富文本解析模块改版

## 本周完成情况
  周一 / 周二 
    √ 爱逛精选合并
      √ 小程序首页搜索热词, 运营后台热词管理
        √ 第一位新增【逛逛首页推荐】，用于控制新版逛逛首页的资源位，逻辑同【直播首页推荐】
          √ 查询 资源位 列表
          √ 查询 指定资源位 计划列表
          √ 添加推荐计划内容
          √ 修改推荐计划内容
          √ 删除推荐计划内容
          √ 清空推荐计划内容

        √ 原有【首页推荐】改名【直播首页推荐】
        √ 原有【分类推荐】改名【搜索推荐】
        √ 点击配置直接配置对应的热词，不再中转下
        √ 模块新增，搜索框热词，用户控制新版逛逛首页的搜索框热词

      √ 小程序搜索模块, 按类搜索
        √ 搜索页增加 搜索类目选择
        √ 商品列表页，根据商品 liveStreamType 选择跳转到 精选商详

      - 埋点
        - 搜索页 类目搜索 曝光、点击
  周三 
    √ 运营后台 推荐模块重构 -待发布
      √ 抽离出推荐基类
      √ 逛逛首页推荐、直播首页推荐、直播划屏推荐、发现模块推荐 合并
      √ 组件动态加载设置缓存，解决组件被卸载问题
    
  周四 / 周五
    √ 小程序富文本解析模块改版
      √ 移除原富文本解析插件，改为rich-text组件
      √ 增加必要的样式预处理
      √ 增加渲染异常日志上报
        
  周六
    
## 本周复盘总结
  进度: 未延期 ｜ 延期 N 天
  质量: 出现线上问题 N 次, 产品验收发现问题 N 个
  需要保持:
  需要提高:
  心得:

## 临时任务 & 下周计划
  爱逛精选秒杀 https://doc.qima-inc.com/pages/viewpage.action?pageId=313307532
           

## 知识点记录
  小程序富文本解析方案调研
  - wxParse 插件
    流程：
      wxParse -> html2json -> HTMLParser 得到抽象语法树ast
      template + setData(ast)
      ```
        {
          node: "article",
          nodes: [
            {
              node: "element",
              tag: "div",
              index: "0",
              tagType: "block",
              nodes: [
                {
                  node: "text",
                  text: "abc123",
                  textArray: [{ node: "text", text: "abc123" }],
                  index: "0.0",
                },
              ],
            },
          ],
          images: [],
          imageUrls: [],
          view: { imagePadding: 5 },
        }
      ```
    存在问题：
      dom嵌套超过12层后，解析失败 (template 只定义了12个渲染模版)
      支持的 dom 有限（基于模版中对各种类型的 wx:if 判断，效率低，代码臃肿）

  - rich-text https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html
      示例: <rich-text nodes="{{ data }}"></rich-text>
      基础库 1.4.0 以上
      官方 tips
        tip: nodes 不推荐使用 String 类型，性能会有所下降。
        tip: rich-text 组件内屏蔽所有节点的事件。
        tip: attrs 属性不支持 id ，支持 class 。
        tip: name 属性大小写不敏感。
        tip: 如果使用了不受信任的HTML节点，该节点及其所有子节点将会被移除。
        tip: img 标签仅支持网络图片。
        tip: 如果在自定义组件中使用 rich-text 组件，那么仅自定义组件的 wxss 样式对 rich-text 中的 class 生效。
  
## 本周工作记录

## 备忘录
  - html2json 纪要
    1. rich-text 的标准格式是 { name: 'div', attrs: {}, children: [] }, 需转换
    2. 对于 name 为 img 类型的节点，设置 attrs.width 为 100%
    3. attrs.style 中的属性值的 空格 会导致 rich-text 解析不出来, 目前处理是对属性值去空格，但对 padding 等特殊值可能有隐患
    4. attrs.style 不支持 padding:0 2px; 这样的缩写写法
    5. 渲染层异常 能否捕获上报，当前的做法是 等待渲染后获取 容器 内是否有内容