编辑态
- MainArea
  - WidgetView
    - DesignerPlugin
      - DesignerView
        - DragGhost：拖拽预览图，监听 dragon引擎 的 onDragstart、onDrag、onDragend，接收其传递的 LocateEvent 对象，其中包含 事件坐标、被拖拽的Node实例
        - ProjectView
          - BuiltinSimulatorHostView
            - Canvas
              - BemTools
                - BorderDetecting 悬停层
                - BorderSelecting 选中层
                - InsertionView 
                - BorderResizing
              - Content
                - iframe

- SimulatorRendererView
  - Router-History.Provider
    - Layout
     - Routes
      - Switch
        - Router.Consumer
          - Route
            - Router.Consumer
              - Router.Provider
                - Renderer
                  - ReactRenderer
                    - Context.Provider
                      - Div
                        - base-renderer
                          - Context.Provider

预览态
- SamplePreview
  - ReactRenderer
    - Context.Provider
      - Div
        - base-renderer
          - Context.Provider
           - Page

预览态流程
  从【url】中获取当前【场景名】
  根据【场景名】从【本地存储】中获取【物料包协议 packages】和【页面搭建协议 projectSchema】
  根据【物料包协议 packages】加载【物料】

渲染器实例列表
  ReactRenderer 继承于 Render，与 Render 没有太大区别，主要功能是向 adater 注入 react 运行时函数 和 renders
  Render 通过 rendererFactory 来获取，这个过程中读取 adater 中的内容完成组装
  Adater 适配层对象，用于抹平框架间差异，存放框架运行时函数，如 Component、createElement，和 renders 如 PageRender


Host 通信中间层，可以访问 designer实例 的所有属性，同时向 模拟器 提供一些收敛的方法
  负责画布交互事件的监听

模拟器 xxx-simulator-renderer：将 Model + 物料描述 转成 Schema + 组件列表，传给渲染器
  悬停层
  选中层

渲染器 xxx-renderer：接受 Schema + 组件列表，完成页面渲染

拖拽引擎 Dragon：将被拖拽对象拖拽到目标区域 => 被拖拽对象(Drag)、目标区域(Drop)、感应区(Sensor)、定位事件

传感器 Sensor：用于事件对象转换、根据拖拽中的位置信息结合组件描述，计算最终的视图渲染




DesignerPlugin
  componentMetadatas: 组件描述协议
  designMode: 设计态/运行态


  library: packages || [],
  utilsMetadata: utils || [],
  extraEnvironment,
  renderEnv,
  device,
  
  deviceClassName,
  simulatorUrl,
  requestHandlersMap,
  locale
  -> 请求 assets
  <- 返回 assets

Context

DesignerView

Designer
  dragon
  activeTracker
  detecting
  project