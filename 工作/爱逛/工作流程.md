开发流程
  进入本地文件目录，克隆小程序项目
    cd desktop/aiguang
    获取小程序项目
      git clone http://gitlab.qima-inc.com/guang/guang-weapp.git
    进入项目目录，创建分支
      cd guang-weapp
      git checkout -b feature/20200721
    安装 xcode
      xcode-select --install
    安装依赖
      ynpm install
    运行
      npm run dev
    启动微信小程序开发者工具，导入项目(dist目录)
      appid 为 wxa2e624400134d690 (src/config.js)

    发布：
      切换至当日 bus / master 分支，执行 npm run release (完成后模拟器可能会加载失败，多重启几次)
      在模拟工具上点击右上角的上传按钮，修改版本号与备注
      上传完成后进入小程序管理 https://mp.weixin.qq.com/wxamp/wacodepage/getcodepage?token=985493563&lang=zh_CN （Aiguang123）
      在 版本管理 中找到刚才提交的版本，在下拉选项中选择 切换为体验版
      确认无误后提交审核，通过后发布

  进入本地文件目录，克隆node项目 
    cd desktop/aiguang
    获取node中间件项目
      git clone http://gitlab.qima-inc.com/guang/guang-h5-node.git
    进入项目目录，创建分支
      cd guang-h5-node
      git checkout -b feature/20200721
    安装依赖
      ynpm install
    运行 start:pre 以预发请求方式启动
      npm run start:pre
    配置 zan-proxy (作用是将向生产环境请求数据)
      左侧菜单选择：预发-多人
      启用host，选择 预发
      启用转发，选择 guang-h5-node(需导入guang-h5-node.json)
      导入地址 http://172.18.247.51:40001/#/rule/list
    配置微信小程序代理 (作用是让本地服务代理发给线上的请求）
      设置-代理设置-手动设置代理 127.0.0.1 8001
    
    预发：打包发布流程(仅能发当天的bus、merge)
      切换到待发布分支 merge、bus
      将功能分支merge到待发布分支 git merge feature/xxx
      提交修改
      进入 https://fe-ops.qima-inc.com/fastbuild/task，任务列表
      添加任务，分别填
        guang-h5-node
        merge/20200808 (git分支)
        pre
      进入基础保障平台申请发布 https://ops.qima-inc.com/#/applications/guang-h5-node/deploy/pre/apply?buId=1

    上线：当天的bus、merge在预发环境验证无误之后，合并到master发布上线
      进入 https://fe-ops.qima-inc.com/fastbuild/task，任务列表
      添加任务，分别填
        guang-h5-node
        master
        pre
  ￼￼    进入基础保障平台申请发布 https://ops.qima-inc.com/#/applications/guang-h5-node/deploy/pre/apply?buId=1
        选择生产环境，发布时间选普通
        到流程页面后发链接给振山
        流程完成后刷新页面，点击 进入发布页，发布程序


发布流程
  进入项目目录，创建新分支 
    git checkout -b feat/功能名
  提交修改，同步更新
  在git网页端，从master创建新分支 bus/日期
  切换到 feat/功能名，创建 merge request，合并到 bus/日期
  提交 merge request 后，复制url互审，确认无误后点击merge

```
master
  |-> feature/功能开发 -
  |                   | 合并到 bus 分支
  |                   |                         
  |-> bus/20201010 ------> 线上打包 ----
  |                                   |
  |<-- 合并到 master 分支 <-- 预发验证 ---
  |                           ｜                  
  |   发布到生产环境 <-----------
  |
  |
  |-> feature/功能开发 ---------------------------------------------------------
  |                   | 合并到 merge 分支                                       |
  |-> merge/20201010 ------------------------------> 线上打包 <----            ｜
  |   |                                              |           |            |
  |   |          x 禁止合并到 master 分支 <-- 预发验证 --            |            |
  |   |                                                          |            |
  |   ----------------------------------------------------> merge/20201011 <---

```

* 打包平台地址: https://fe-ops.qima-inc.com/fastbuild/task
* 发布平台地址: https://ops.qima-inc.com/#/applications/guang-admin-node/deploy/pre/apply?buId=1

## 注意点
* 从 master 拉取分支的时候注意有没有 未合并到 master 的 bus 分支
* merge 分支仅用于预发验证，禁止与 bus、master 相互合并
* 拉 merge 分支时，如果有昨日的 merge分支，优先从 merge分支迁出，避免顶掉其他同事正在验证的功能