本周工作安排
  √ 有赞多客服项目开发
    √ c端联调
    √ b端联调
  x 多网点支持海报分享带网店id -德文
    - 进入直播间、商详、(其他可能唤起sku面板的情况) 时判断是否从分享链接带入 storeId，如有则跳过 storeId 的获取流程 
  - 运营后台活动场次列表支持单场直播多活动 -喜康、吴刚
  - 商品管理权限 -喜康、楷雄
  √ 热卖推荐库存改为消息推送 -杨威 

本周完成情况
  周一
    √ 有赞多客服项目开发
      √ login_biz 增加 aiguangApp 流程确认
      √ c端联调
        √ 爱逛app来源的会话页去掉顶部
      √ b端联调
        √ 即时会话-右侧资料-会话来源
        √ 即时会话-左侧列表-筛选
        √ 即时会话-下方控制台-历史会话 - http://zanapi.qima-inc.com/site/service/view/130846
        √ 历史会话-下方列表-会话来源
        √ 客户中心-筛选-来源渠道、来源方式 http://zanapi.qima-inc.com/site/service/view/112303
        x 历史会话-筛选-会话来源 -需有赞侧处理 /api/oauthentry/youzan.message.courier.cp.consultant.combo/1.0.0/get
        √ 微商城app-来源方式 -有赞后端修改，对接张兴
        √ 走一遍有赞的测试用例 https://qa.qima-inc.com/tcmPortal/exeTreeView?versionId=8392
  周二
    x 多网点支持海报分享带网店id (需求存疑，待产品论证方案)
      背景：
        多网点商品唤起sku时，默认根据经纬度查询距离用户最近的网店信息
      流程梳理
        发起分享
          有多网点id
          没有多网点id

        通过分享进入直播间
          -> 带 storeId、kdtId
            -> 存在 order-chain-popups 可以访问到到地方
              -> 点击商品打开sku，
          -> 不带信息 -> 不做处理
        通过分享进入商详
          -> 带 storeId、kdtId
            -> 

          -> 不带信息 -> 不做处理
          
      测试用例
        - 直播间发起分享
          - 通过右上角按钮发起
          - 通过下方工具栏发起分享
            - 发送给微信好友
            - 保存海报
          - 通过抽奖邀请
            - 发送给微信好友
            - 保存海报
          - 通过亲密度分享
            - 发送给微信好友
            - 保存海报
          - 通过评论区分享按钮分享
            - 发送给微信好友
            - 保存海报
        - 商详页发起分享
        - 通过右上角按钮发起
        - 通过标题分析按钮分享
          - 发送给微信好友
          - 保存海报

  周三
    √ 热卖推荐 -杨威
      √ 热卖推荐库存改为消息推送 type: 23
        √ 非秒杀商品 (多端同时登陆一个账号时，一个账户退出，另一个账户不再被推送，需要重新进入直播间)
          √ 提交订单时库存-1
          √ 取消订单时库存+1
          √ 维权成功后库存+1
          √ 修改库存时推送新库存
          √ 收到推送比对直播间id，避免串库存
          √ 推送增加 库存修改时间 作为版本号，只更新最新版本的库存
        √ 秒杀商品 (秒杀商品库存推送走专门的消息 type: 19)
          √ 秒杀商品的库存只减不增，只在下单的时候推送 (前端为了避免网络引起的竞态，只更新更少的数据)
      √ 库存初始值取宝贝袋商品数据
      √ 秒杀商品库存根据秒杀活动阶段取 秒杀库存 或 常规库存 (基于seckillInfo.$$showSeckillPrice)
  周四
    - 商品管理权限 -喜康、楷雄 (等待发布)
    √ 有赞多客服 灰度发布

  周五
    - 运营后台活动场次列表支持单场直播多活动 -喜康、吴刚

  周六

本周复盘总结
  进度: 未延期 ｜ 延期 N 天
  质量: 出现线上问题 N 次，产品验收发现问题 N 个
  需要保持: 主动梳理通信流程，对接多方时积极协调资源，推动项目进度
  需要提高:
  心得: 写测试用例非常重要，一方面是帮助梳理业务流程，另一方面可以有效减少bug产生的概率

临时任务 & 下周计划
           
知识点记录
  koa 概念
    中间件: 
      作用类似于java的过滤器，所有的请求都会被中间件处理
      中间件本质是逐个调用的函数数组
    上下文(Context):
      每个请求都将创建一个Context实例，包含 request、response、state、cookies 等属性

本周工作记录
  qa-sc 环境，点击 SC设置 下面的同步sc之后会更新可选项，按需选择，不需要勾选 debug
  是否代理成功可以在 zan-proxy 的监控页看请求头是否带上了 X-Service-Chain: {"name":"prj0029269"}，prj0029269 是项目编号，与上午sc设置的一致
  微商城app代理预发可以用 有赞移动助手，zanproxy代理没有成功

  运营后台权限流程梳理
    权限表地址 https://shimo.im/sheets/p6VYPPYjVVgpGrRW/MODOC
    前端 router.js 中定义 二级菜单 的权限码，与权限表中一致
    router.js 中 二级菜单 对应组件中 各自维护 三级菜单的权限表

  灰度发布教程 
    https://doc.qima-inc.com/pages/viewpage.action?pageId=239685341
    https://doc.qima-inc.com/pages/viewpage.action?pageId=229571118
    简述
      1、线上打包
      2、申请发布工单，选择 生产 环境，发布类型选择 灰度发布，申请发布
      3、工单审批完成后，回到发布页面发布
      4、发布成功之后，开始推送 灰度规则
      5、如选择kdtid模式，分批次填写 kdtid列表，半小时追加一次比例直到 100%，期间关注监控指标有无异常